<!DOCTYPE html>
<head>
  <title>Register</title>
</head>
<body>
  <input type="email" id="email" placeholder="email"/>
  <button onclick="registerUser()">Submit</button>

  <script>
    function registerUser() {
      console.log('texting');
      const plan = getUrlVars()["plan"];
      const params = {
              email: document.querySelector('#email').value,
              plan: plan,
          };
      console.log(params);

      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'https://api.adbot.co.za/adbud/register', true);
      xhr.setRequestHeader('Content-type', 'application/json')
      xhr.send(JSON.stringify(params))
      xhr.onload = function () {
          // do something to response
          console.log(this.responseText);
      };
      xhr.send()
    }

    function getUrlVars() {
      var vars = {};
      var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
          vars[key] = value;
      });
      return vars;
  }
  </script>
</body>